<!doctype html>
<html>

    <head>
        <title></title>
    </head>

    <body>
        <h1>Shopping Cart</h1>

        <script>
            
            var cart = [];
            var Item = function(name, price, count) 
            {
                this.name = name;
                this.price = price;
                this.count = count;
            };

            // addItemToCart(name, price, count)
            function addItemToCart(name, price, count) 
            {
                for (var i in cart) //verify same item isnt added
                {
                    if (cart[i].name === name) //if item is added increment count
                    {
                        cart[i].count += count;
                        return;
                    }
                }
                var item = new Item(name, price, count);
                cart.push(item);
                saveCart();
            }

            // removeItemFromCart(name) - only removes one item
            function removeItemFromCart(name) 
            {
                for (var i in cart)
                {
                    if (cart[i].name === name)
                    {
                        cart[i].count --;
                        if (cart[i].count === 0)
                        {
                            removeItemFromCartAll(name);//splice - remove item from array
                        }
                        break;
                    }
                }
                saveCart();
            }

            // removeItemFromCartAll(name) - removes all item
            function removeItemFromCartAll(name)
            {
                for (var i in cart)
                {
                    if(cart[i].name === name)
                    {
                        cart.splice(i, 1);
                        break;
                    }
                }
                saveCart();
            }

            // clearCart() - clear all of cart
            function clearCart() 
            {
                cart = [];
                saveCart();
            }

            // countCart() - return total count
            function countCart()
            {
                var totalCount = 0;
                for (var i in cart)
                {
                    totalCount += cart[i].count;
                }
                return totalCount;
            }

            // totalCart() - return total cost
            function totalCost()
            {
                var totalCost = 0;
                for (var i in cart)
                {
                    totalCost += cart[i].price;
                }
                return totalCost;
            }

            // listCart() - array of items
            function listCart()
            {
                var cartCopy = [];
                for (var i in cart)
                {
                    var item = cart[i];
                    var itemCopy = {};
                    for (var p in item) 
                    {
                        itemCopy[p] = item[p];
                    }

                    cartCopy.push(itemCopy);
                }
                return cartCopy;
            }

            // saveCart() - allows to go from page to page - add an item and display cart later
            function saveCart() //use when edit is made to cart
            {
                localStorage.setItem("shoppingCart", JSON.stringify(cart)); //"name", value - convert to string or number
            }

            // loadCart() - load saved cart from local storage
            function loadCart()
            {
                cart = JSON.parse(localStorage.getItem("shoppingCart")); //this item will be a string - need to convert
            }

            loadCart();

            var array = listCart();
            console.log(array);
            

        </script>

    </body>

</html>